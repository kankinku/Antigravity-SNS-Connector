# 텔레그램 작업 및 오류 수정 이력 (Work & Error Log)

본 문서는 이번 세션 동안 텔레그램 인터페이스를 통해 진행된 작업 내역과 사용자로부터 지적받은 오류 및 개선 사항을 기록합니다.

---

## 🛠️ 텔레그램 기반 작업 내역

| 일시 | 작업 항목 | 상세 내용 |
|---|---|---|
| 20:10 | **Pine Script 요약 보고** | Attack, Defense, Alpha 단계별 발전 과정 및 성과 지표 요약 전달 |
| 20:15 | **리소스 소모 분석** | 대기 모드 중 토큰 및 컴퓨터 자원 소모량(전력/CPU) 분석 보고 |
| 20:20 | **박동 주기 조정** | 토큰 절감을 위해 폴링 대기 시간을 100초에서 300초(5분)로 연장 |
| 21:00 | **프로젝트 패키징** | `tel-anti` 폴더 생성 및 GitHub 배포를 위한 프로젝트 구조화 |
| 21:15 | **보안 최적화** | 하드코딩된 토큰 제거 및 `.env` 기반 환경변수 시스템 도입 |
| 21:45 | **실환경 배포 검증** | `uvx`를 이용한 GitHub 직접 설치 및 실행 테스트 완료 |

---

## ⚠️ 지적된 오류 및 개선 사항 (Feedback Loop)

### 1. 아키텍처 비효율성 지적
- **내용**: 에이전트가 제안한 별도의 '백그라운드 메시지 허브' 방식에 대해 사용자가 "추가 프로세스 낭비"라고 지적.
- **수정**: 별도의 프로세스 없이 MCP 툴 내에서 '상태 저장형 박동 폴링'을 수행하는 단순화된 아키텍처로 전면 수정.

### 2. 보안 취약점 지적 (Critical)
- **내용**: GitHub 푸시 준비 과정에서 소스 코드 내에 텔레그램 토큰과 챗 ID가 그대로 노출되어 있음을 사용자가 강력하게 지적.
- **수정**: `.env` 파일과 `python-dotenv`를 도입하여 모든 민감 정보를 환경 변수화하고, `.gitignore`를 통해 유출을 원천 차단.

### 3. 패키징 및 빌드 오류
- **내용**: `uvx`를 이용한 원격 실행 테스트 시 `hatchling` 빌드 백엔드가 파일 구조를 인식하지 못해 설치 실패 발생.
- **수정**: `src` 레이아웃 표준 구조를 도입하고 `pyproject.toml`에 명시적인 `packages` 포함 설정을 추가하여 해결.

---

## 💡 교훈 및 에이전트 성찰
- **단순함의 가치**: 인프라를 복잡하게 늘리기보다 기존 툴의 생명주기를 활용하는 방향이 사용자 만족도가 높음.
- **보안 감수성**: 퍼블릭 배포 전에는 반드시 `grep` 등을 통해 모든 민감 정보를 재검증하는 습관이 필요함.
- **표준 준수**: 단순 스크립트 배포보다 `src` 레이아웃 등 표준 패키징 규칙을 따르는 것이 배포 신뢰성을 보장함.
